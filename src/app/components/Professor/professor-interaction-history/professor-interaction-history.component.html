<div class="container">
  <!-- Left Pane (List of Appeals) -->
  <div class="inbox">
    <mat-nav-list>
      <mat-list-item
        class="inbox-item"
        *ngFor="let appeal of this.professorAppeals"
        (click)="selectAppeal(appeal)"
        [class.selected-appeal]="appeal === currentAppeal"
      >
        <p class="inbox-timestamp">
          {{ localFormatTimestamp(appeal.created_at).time }}
        </p>

        <p matLine class="inbox-name">
          {{ appeal?.student_name }}
        </p>
      </mat-list-item>
    </mat-nav-list>
  </div>
  <!-- Right Pane (Selected Appeal Details) -->
  <div class="right-pane">
    <div class="card" *ngIf="messageLoaded">
      <mat-toolbar class="top-bar">
        <mat-toolbar-row>
          <img class="header-avatar" ngxGravatar [email]="user.email" />
          <h1>
            &nbsp; {{ currentAppeal.student_name }}<span>: </span
            >{{ currentAppeal.assignment_name }}
          </h1>
        </mat-toolbar-row>
      </mat-toolbar>
      <div class="chat-list" #chatListContainer>
        <ng-container *ngFor="let message of this.messages">
          <div
            class="chat-item"
            [ngClass]="{
              right: message.sender_id == user.id,
              left: message.sender_id != user.id
            }"
          >
            <!-- <img ngxGravatar [email]="user.email" /> -->
            <img *ngIf="isUser" ngxGravatar [email]="user.email" />
            <img *ngIf="!isUser" ngxGravatar [email]="sender.email" />

            <!-- <img id="avatar" [src]="chat?.user?.profileImageUrl">  -->
            <p id="message-body">{{ message?.message_text }}</p>
          </div>
        </ng-container>
      </div>
      <div class="chat-footer">
        <button
          class="use-template-button"
          mat-stroked-button
          [matMenuTriggerFor]="menu"
        >
          Use Template
        </button>
        <mat-menu #menu="matMenu">
          <button
            mat-menu-item
            *ngFor="let template of professorTemplates"
            (click)="selectTemplate(template.temp_text)"
          >
            {{ template.temp_name }}
          </button>
        </mat-menu>

        <input
          matInput
          id="chat-textarea"
          [(ngModel)]="chatInputMessage"
          required
        />
        <button
          mat-stroked-button
          id="send-button"
          (click)="sendMessage()"
          [disabled]="chatInputMessage === ''"
        >
          Send
        </button>
      </div>
    </div>
  </div>
</div>
